<!DOCTYPE html>
<html>
<head>
    <title>Pittsburgh Event Finder</title>
    <style>
      table { border-collapse: collapse; width: 100%; margin-top: 16px; }
      th, td { border-bottom: 1px solid #ddd; padding: 10px; text-align: left; }
      th { background: #C7B67E; }
      form { display: flex; gap: 12px; flex-wrap: wrap; align-items: end; }
      label { display: block; font-size: 0.9rem; }
      input { padding: 6px; }
      button { padding: 6px 14px; cursor: pointer; background: #000; color: #C7B67E; font-weight: bold; }
      .main {width: 90%; margin: 10px auto;}
      a {color: #333;}
      .footer-img {width: 100% !important; margin: 0 auto 0;}
    </style>
</head>
<body>
  <h1>Pittsburgh Event Finder</h1>

  <form method="POST">
    <label for="event_date">Event date (optional):</label>
    <input type="date" id="event_date" name="event_date">
    <br><br>

    <label for="preferred_period">Time of day:</label>
    <select id="preferred_period" name="preferred_period">
      <option value="any" selected>Any</option>
      <option value="morning">Morning</option>
      <option value="afternoon">Afternoon</option>
      <option value="evening">Evening</option>
    </select>
    <br><br>

    <label for="budget">Max price (budget):</label>
    <input type="number" id="budget" name="budget" step="0.01" min="0" placeholder="e.g., 25">
    <br><br>

    <label for="max_results">Number of results:</label>
    <input type="number" id="max_results" name="max_results" min="1" max="20" value="5">
    <br><br>

    <button type="submit">Find events</button>
  </form>

  <hr>

  {% if error %}
    <p><strong>{{ error }}</strong></p>
  {% endif %}

  {% if suggestions %}
    <h2>Suggestions</h2>

    {% for plan in suggestions %}
      <div style="margin-bottom: 16px;">
        <h3>{{ plan.plan_name }}</h3>
        <p>
          Estimated cost: ${{ "%.2f"|format(plan.total_estimated_cost) }}<br>
          Score: {{ plan.score }}
        </p>

        {% for stop in plan.stops %}
          <p>
            <strong>{{ stop.name }}</strong><br>
            {% if stop.start_time %}When: {{ stop.start_time }}<br>{% endif %}
            {% if stop.location %}Where: {{ stop.location }}<br>{% endif %}
            {% if stop.source %}Source: {{ stop.source }}<br>{% endif %}
            {% if stop.url %}<a href="{{ stop.url }}" target="_blank" rel="noopener">Link</a>{% endif %}
          </p>
        {% endfor %}
      </div>
      <hr>
    {% endfor %}
  {% endif %}
  <img class="footer-img" src="static/images/skyline.png" alt="Pittsburgh skyline line art" width="100%">
<p><a href="https://www.freepik.com/free-vector/flat-pittsburgh-skyline-silhouette_48041426.htm">Skyline image by freepik</a></p>
</body>
</html>